<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Series</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <h1>Hero</h1>
    <span class="banner"></span>
    <span class="series">
      <h1>Series</h1>
      <ul class="series-list"></ul>
    </span>
    <script>
      const banner = document.querySelector(".banner");
      const series = document.querySelector(".series-list");

      function getImage(thumbnail, extension) {
        return `${thumbnail}/portrait_xlarge.${extension}`;
      }

      function renderSeries() {
        const id = window.location.search;
        const params = new URLSearchParams(id);
        const q = parseInt(params.get("q"));
        const heroes = JSON.parse(localStorage.getItem("heroes"));
        const findHero = heroes.find((hero) => hero.id === q);

        banner.innerHTML = `
          <span class='hero-banner' >${findHero.name}</span>  <br>
          <img src=${getImage(
            findHero.thumbnail.path,
            findHero.thumbnail.extension
          )} />`;

        const heroSeries = findHero.series.items;
        const allSeries = heroSeries.map((item) => item.name);

        for (let i = 0; i < allSeries.length; i++) {
          series.insertAdjacentHTML(
            "beforeend",
            `
            <li>${allSeries[i]}</li>`
          );
        }
      }
      renderSeries();
    </script>
  </body>
</html>
